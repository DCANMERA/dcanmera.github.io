(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3039a47f"],{"7a82":function(t,e,o){var a=o("23e7"),s=o("83ab"),n=o("9bf2");a({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:n.f})},aec0:function(t,e,o){},c965:function(t,e,o){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o.d(e,"a",(function(){return l}));o("7a82");function s(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,o){return e&&s(t.prototype,e),o&&s(t,o),t}o("e7e5");var r=o("d399"),i=o("2b0e");i["a"].use(r["a"]);var c=function(){function t(){a(this,t)}return n(t,[{key:"validate",value:function(t){for(var e in t)if(!t[e].reg.test(t[e].value))return Object(r["a"])(t[e].errorMsg),!1;return!0}}]),t}(),l=new c},ca8e:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"M-secure"},[o("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$goBack()}}}),o("van-notice-bar",{staticClass:"M-notive",attrs:{"left-icon":"volume-o",mode:"closeable",text:"客服在线时间 9:00 - 17:30  客服联系方式 400-600-243"}}),o("layout-bg",[o("div",{staticClass:"M-cell"},[o("van-cell",{attrs:{title:"修改密码","is-link":"",center:!0},on:{click:t.openPasswordBox}}),o("van-cell",{attrs:{title:"注销账号","is-link":"",center:!0},on:{click:t.destroyAccount}})],1)]),o("div",{staticClass:"M-logout"},[o("van-button",{attrs:{block:"",round:""},on:{click:t.logout}},[t._v("退出登录")])],1),o("van-popup",{attrs:{"is-link":"",position:"bottom",closeable:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[o("div",{staticClass:"M-form"},[o("div",{staticClass:"M-formTitle"},[t._v("修改密码")]),o("van-form",[o("van-field",{attrs:{type:t.isPassword?"password":"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(首字符必须为字母)","right-icon":t.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.oldPassword,callback:function(e){t.$set(t.password,"oldPassword",e)},expression:"password.oldPassword"}}),o("van-field",{attrs:{type:t.isPassword?"password":"text",name:"新密码",label:"新密码",placeholder:"新密码(首字符必须为字母)","right-icon":t.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.newPassword,callback:function(e){t.$set(t.password,"newPassword",e)},expression:"password.newPassword"}}),o("div",{staticClass:"M-commit_btn"},[o("van-button",{attrs:{round:"",block:""},on:{click:t.commit}},[t._v("提交")])],1)],1)],1)])],1)},s=[],n=(o("d3b7"),o("aec0"),o("c965")),r={name:"Secure",components:{LayoutBg:function(){return o.e("chunk-1ccd0594").then(o.bind(null,"8ce7"))}},data:function(){return{isOpen:!1,isPassword:!0,password:{oldPassword:"",newPassword:""}}},methods:{toggleType:function(){this.isPassword=!this.isPassword},openPasswordBox:function(){this.password.oldPassword="",this.password.newPassword="",this.isOpen=!0},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号，一旦注销无法恢复！"}).then((function(){var e=localStorage.getItem("__tk");t.$judgeToken(e)||t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),700==e.data.code&&t.$goPage(Login),"G001"==e.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),localStorage.removeItem("__$"),t.$goPage("Login")}),800),t.$toast(e.data.msg)}))}))},logout:function(){var t=this;this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录！"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){t.$toast.clear(),localStorage.removeItem("__tk");var e=t.$store.state.wallet;localStorage.setItem("__$",JSON.stringify(e)),t.$goPage("Login")}),800)}))},commit:function(){var t=this,e={oldPassword:{value:this.password.oldPassword,errorMsg:"旧密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},newPassword:{value:this.password.newPassword,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}};if(n["a"].validate(e)){if(this.password.newPassword==this.password.oldPassword)return void this.$toast("新密码和旧密码不能相同");var o=localStorage.getItem("__tk");if(this.$judgeToken(o))return;this.axios({method:"POST",url:"/updatePassword",data:{tokenString:o,appkey:this.appkey,password:this.password.newPassword,oldPassword:this.password.oldPassword}}).then((function(e){t.$toast.clear(),700==e.data.code&&t.$router.push({name:"Login"}),"E001"==e.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(e.data.msg)}))}}}},i=r,c=o("2877"),l=Object(c["a"])(i,a,s,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-3039a47f.ffa823b4.js.map