(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e53a1af"],{"4e82":function(t,e,a){"use strict";var n=a("23e7"),r=a("1c0b"),o=a("7b0b"),i=a("d039"),s=a("a640"),c=[],d=c.sort,u=i((function(){c.sort(void 0)})),l=i((function(){c.sort(null)})),f=s("sort"),h=u||!l||!f;n({target:"Array",proto:!0,forced:h},{sort:function(t){return void 0===t?d.call(o(this)):d.call(o(this),r(t))}})},7879:function(t,e,a){t.exports=a.p+"img/noorder.6ab87de4.png"},9380:function(t,e,a){},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),o=a("a691"),i=a("50c4"),s=a("7b0b"),c=a("65f0"),d=a("8418"),u=a("1dde"),l=a("ae40"),f=u("splice"),h=l("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!h},{splice:function(t,e){var a,n,u,l,f,h,b=s(this),k=i(b.length),y=r(t,k),_=arguments.length;if(0===_?a=n=0:1===_?(a=0,n=k-y):(a=_-2,n=p(g(o(e),0),k-y)),k+a-n>m)throw TypeError(v);for(u=c(b,n),l=0;l<n;l++)f=y+l,f in b&&d(u,l,b[f]);if(u.length=n,a<n){for(l=y;l<k-n;l++)f=l+n,h=l+a,f in b?b[h]=b[f]:delete b[h];for(l=k;l>k-n+a;l--)delete b[l-1]}else if(a>n)for(l=k-n;l>y;l--)f=l+n-1,h=l+a-1,f in b?b[h]=b[f]:delete b[h];for(l=0;l<a;l++)b[l+y]=arguments[l+2];return b.length=k-n+a,u}})},f86d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"M-order",class:{active:0==t.orderData.length}},[n("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$goBack()}}}),n("layout-bg",[t.isHas?n("van-tabs",{attrs:{sticky:"","offset-top":46},on:{change:t.changeTab},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabData,(function(e,r){return n("van-tab",{key:r,attrs:{title:e.title}},[t.orderData.length>0?n("div",{staticClass:"M-order_content"},t._l(t.orderData,(function(e,a){return n("div",{key:e.oid,staticClass:"M-order_cntItem"},[n("order-list",{attrs:{"info-title-left":e.oid,date:t._f("formatDate")(e.date),count:e.count,total:e.total,"is-right":!0,"is-receive":2==e.status},on:{"confirm-receive":function(n){return t.confirmReceive(e,a)},remove:function(n){return t.removeOrder(e.oid,a)}}},t._l(e.data,(function(e,a){return n("order-item",{key:a,attrs:{item:e}},[n("div",{attrs:{slot:"rules"},slot:"rules"},[t._v(t._s(e.rule))]),n("div",{attrs:{slot:"count"},slot:"count"},[t._v("×"+t._s(e.count))])])})),1)],1)})),0):n("van-empty",{attrs:{description:"没有订单数据",image:a("7879")}},[n("van-button",{staticClass:"M-empty_btn",attrs:{round:""},on:{click:function(e){return t.$goPage("Menu")}}},[t._v(" 去喝一杯 ")])],1)],1)})),1):n("van-empty",{attrs:{description:"没有订单数据",image:a("7879")}},[n("van-button",{staticClass:"M-empty_btn",attrs:{round:""},on:{click:function(e){return t.$goPage("Menu")}}},[t._v(" 去喝一杯 ")])],1)],1)],1)},r=[],o=(a("d81d"),a("4e82"),a("a434"),a("d3b7"),a("9380"),{name:"Order",components:{LayoutBg:function(){return a.e("chunk-1ccd0594").then(a.bind(null,"8ce7"))},OrderList:function(){return a.e("chunk-68d4c33a").then(a.bind(null,"b059"))},OrderItem:function(){return a.e("chunk-12c54857").then(a.bind(null,"9d57"))}},data:function(){return{tabIndex:0,tabData:[{title:"全部"},{title:"配送中"},{title:"已完成"}],orderData:[],isHas:!0}},created:function(){this.getOrderDataByStatus()},methods:{changeTab:function(t,e){this.getOrderDataByStatus()},getOrderDataByStatus:function(){var t=this,e=localStorage.getItem("__tk");this.$judgeToken(e)||this.axios({method:"GET",url:"/findOrder",params:{tokenString:e,appkey:this.appkey,status:this.tabIndex}}).then((function(e){if(t.$toast.clear(),700==e.data.code)t.$router.push({name:"Login"});else if(7e4==e.data.code){if(0==t.tabIndex&&0==e.data.result.length)return;var a=[];e.data.result.map((function(t){for(var e=0;e<a.length;e++)if(a[e].oid==t.oid)return a[e].data.push(t),a[e].count+=t.count,void(a[e].total+=t.count*t.price);var n={};n.oid=t.oid,n.count=t.count,n.total=t.count*t.price,n.status=t.status,n.date=t.createdAt,n.data=[t],a.push(n)})),t.orderData=a,t.orderData.sort((function(t,e){return new Date(e.date).getTime()-new Date(t.date).getTime()}))}}))},confirmReceive:function(t,e){var a=this,n=localStorage.getItem("__tk");this.$judgeToken(n)||this.axios({method:"POST",url:"/receive",data:{tokenString:n,appkey:this.appkey,oid:t.oid}}).then((function(n){a.$toast.clear(),700==n.data.code&&a.$router.push({name:"Login"}),8e4==n.data.code&&(1==a.tabIndex&&a.orderData.splice(e,1),t.status=2),a.$toast(n.data.msg)}))},removeOrder:function(t,e){var a=this,n=localStorage.getItem("__tk");this.$judgeToken(n)||this.axios({method:"POST",url:"/removeOrder",data:{tokenString:n,oid:t,appkey:this.appkey}}).then((function(t){a.$toast.clear(),700==t.data.code&&a.$router.push({name:"Login"}),9e4==t.data.code&&a.orderData.splice(e,1),a.$toast(t.data.msg)}))}}}),i=o,s=a("2877"),c=Object(s["a"])(i,n,r,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-1e53a1af.5be1cd55.js.map