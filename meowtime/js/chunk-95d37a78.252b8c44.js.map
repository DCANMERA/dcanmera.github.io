{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/coupon/Coffeewallet.vue?b6d5","webpack:///src/views/coupon/Coffeewallet.vue","webpack:///./src/views/coupon/Coffeewallet.vue?2d75","webpack:///./src/views/coupon/Coffeewallet.vue","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","1","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$goBack","$goPage","_l","item","index","key","_v","_s","_f","price","available","valueDesc","unitDesc","name","discountCheck","model","value","callback","$$v","$set","expression","getTotalPrice","onSubmit","checkAll","isCheckAll","staticRenderFns","component","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","i","TypeError","module","exports","right"],"mappings":"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","file":"js/chunk-95d37a78.252b8c44.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"M-coffeewallet\"},[_c('van-nav-bar',{staticClass:\"M-header\",attrs:{\"title\":\"咖啡钱包\",\"left-text\":\"返回\",\"right-text\":\"更多优惠\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$goBack()},\"click-right\":function($event){return _vm.$goPage('Coupon')}}}),_vm._l((_vm.wallet),function(item,index){return _c('div',{key:index,staticClass:\"M-walletItem\"},[_c('div',{staticClass:\"M-walletPrice\"},[_vm._v(\" \"+_vm._s(_vm._f(\"formattingPrice\")(item.price))+\" \")]),_c('div',{staticClass:\"M-couponAmount\"},[_vm._v(\"拥有 \"),_c('span',[_vm._v(_vm._s(item.available))]),_vm._v(\" 张\")]),_c('div',{staticClass:\"M-walletTip\"},[_vm._v(\" 减￥\"+_vm._s(item.valueDesc+item.unitDesc)+\" \"),_c('br'),_c('span',[_vm._v(_vm._s(item.name))])]),_c('div',{staticClass:\"M-walletCount\"},[_c('van-checkbox',{on:{\"click\":_vm.discountCheck},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}})],1)])}),_c('van-submit-bar',{attrs:{\"price\":_vm.getTotalPrice,\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"click\":_vm.checkAll},model:{value:(_vm.isCheckAll),callback:function ($$v) {_vm.isCheckAll=$$v},expression:\"isCheckAll\"}},[_vm._v(\"全选\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"M-coffeewallet\">\r\n\r\n    <!-- 顶部栏 -->\r\n    <van-nav-bar class=\"M-header\"\r\n                 title=\"咖啡钱包\"\r\n                 left-text=\"返回\"\r\n                 right-text=\"更多优惠\"\r\n                 left-arrow\r\n                 fixed\r\n                 @click-left=\"$goBack()\"\r\n                 @click-right=\"$goPage('Coupon')\" />\r\n\r\n    <!-- 优惠券栏 -->\r\n    <div class=\"M-walletItem\"\r\n         v-for=\"(item, index) in wallet\"\r\n         :key=\"index\">\r\n      <div class=\"M-walletPrice\">\r\n        {{item.price | formattingPrice}}\r\n      </div>\r\n      <div class=\"M-couponAmount\">拥有 <span>{{item.available}}</span> 张</div>\r\n      <div class=\"M-walletTip\">\r\n        减￥{{item.valueDesc+item.unitDesc}} <br />\r\n        <span>{{item.name}}</span>\r\n      </div>\r\n      <div class=\"M-walletCount\">\r\n        <van-checkbox v-model=\"item.checked\"\r\n                      @click=\"discountCheck\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 提交栏 -->\r\n    <van-submit-bar :price=\"getTotalPrice\"\r\n                    button-text=\"提交订单\"\r\n                    @submit=\"onSubmit\">\r\n      <van-checkbox v-model=\"isCheckAll\"\r\n                    @click=\"checkAll\">全选</van-checkbox>\r\n    </van-submit-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import '@/assets/scss/coffeewallet.scss';\r\n\r\n\r\n  export default {\r\n    name: 'Coffeewallet',\r\n\r\n    data() {\r\n      return {\r\n\r\n        // 是否全选bool\r\n        isCheckAll: false,\r\n\r\n        // 优惠数据\r\n        wallet: []\r\n      };\r\n    },\r\n\r\n    // 每次进入刷新状态\r\n    beforeRouteEnter(to, from, next) {\r\n      to.meta.keepAlive = false;\r\n      next();\r\n    },\r\n\r\n    // 设置返回与进入刷新状态\r\n    beforeRouteLeave(to, from, next) {\r\n      to.meta.keepAlive = true;\r\n      next();\r\n    },\r\n\r\n    created() {\r\n      this.wallet = JSON.parse(localStorage.getItem('__$'));\r\n\r\n      if (this.wallet === null || this.wallet === undefined) {\r\n        this.wallet = this.$store.state.wallet;\r\n      }\r\n    },\r\n\r\n    methods: {\r\n\r\n      // 全选\r\n      checkAll() {\r\n        this.wallet.map(item => item.checked = this.isCheckAll);\r\n      },\r\n\r\n      // 单选\r\n      discountCheck() {\r\n        this.isCheckAll = this.wallet.filter(item => item.checked).length == this.wallet.length;\r\n      },\r\n\r\n      // 提交订单\r\n      onSubmit() {\r\n        let price = (this.getTotalPrice / 100).toFixed(2) + '元';\r\n        if (this.wallet.filter(item => item.checked).length == 0) {\r\n          this.$toast('未选择代金券');\r\n          return;\r\n        };\r\n        this.$dialog.confirm({\r\n            title: '支付界面',\r\n            message: '是否支付 ' + price,\r\n          })\r\n          .then(() => {\r\n\r\n            // on confirm\r\n            this.$toast.clear();\r\n            this.$store.commit('changeWallet', this.wallet);\r\n            this.$toast('支付成功');\r\n          })\r\n          .catch(() => {\r\n\r\n            // on cancel\r\n          });\r\n      }\r\n    },\r\n\r\n    computed: {\r\n\r\n      // 计算总价\r\n      getTotalPrice() {\r\n        return this.wallet\r\n          .filter(item => item.checked)\r\n          .reduce((p, n) => p + (n.price * n.count), 0) * 100;\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coffeewallet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coffeewallet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Coffeewallet.vue?vue&type=template&id=0e442d74&\"\nimport script from \"./Coffeewallet.vue?vue&type=script&lang=js&\"\nexport * from \"./Coffeewallet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}