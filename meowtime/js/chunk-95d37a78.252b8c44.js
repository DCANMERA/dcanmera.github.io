(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95d37a78"],{"13d5":function(t,e,i){"use strict";var n=i("23e7"),c=i("d58f").left,l=i("a640"),a=i("ae40"),r=l("reduce"),o=a("reduce",{1:0});n({target:"Array",proto:!0,forced:!r||!o},{reduce:function(t){return c(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"5a85":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"M-coffeewallet"},[i("van-nav-bar",{staticClass:"M-header",attrs:{title:"咖啡钱包","left-text":"返回","right-text":"更多优惠","left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$goBack()},"click-right":function(e){return t.$goPage("Coupon")}}}),t._l(t.wallet,(function(e,n){return i("div",{key:n,staticClass:"M-walletItem"},[i("div",{staticClass:"M-walletPrice"},[t._v(" "+t._s(t._f("formattingPrice")(e.price))+" ")]),i("div",{staticClass:"M-couponAmount"},[t._v("拥有 "),i("span",[t._v(t._s(e.available))]),t._v(" 张")]),i("div",{staticClass:"M-walletTip"},[t._v(" 减￥"+t._s(e.valueDesc+e.unitDesc)+" "),i("br"),i("span",[t._v(t._s(e.name))])]),i("div",{staticClass:"M-walletCount"},[i("van-checkbox",{on:{click:t.discountCheck},model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}})],1)])})),i("van-submit-bar",{attrs:{price:t.getTotalPrice,"button-text":"提交订单"},on:{submit:t.onSubmit}},[i("van-checkbox",{on:{click:t.checkAll},model:{value:t.isCheckAll,callback:function(e){t.isCheckAll=e},expression:"isCheckAll"}},[t._v("全选")])],1)],2)},c=[],l=(i("4de4"),i("d81d"),i("13d5"),i("b680"),i("ab5c"),{name:"Coffeewallet",data:function(){return{isCheckAll:!1,wallet:[]}},beforeRouteEnter:function(t,e,i){t.meta.keepAlive=!1,i()},beforeRouteLeave:function(t,e,i){t.meta.keepAlive=!0,i()},created:function(){this.wallet=JSON.parse(localStorage.getItem("__$")),null!==this.wallet&&void 0!==this.wallet||(this.wallet=this.$store.state.wallet)},methods:{checkAll:function(){var t=this;this.wallet.map((function(e){return e.checked=t.isCheckAll}))},discountCheck:function(){this.isCheckAll=this.wallet.filter((function(t){return t.checked})).length==this.wallet.length},onSubmit:function(){var t=this,e=(this.getTotalPrice/100).toFixed(2)+"元";0!=this.wallet.filter((function(t){return t.checked})).length?this.$dialog.confirm({title:"支付界面",message:"是否支付 "+e}).then((function(){t.$toast.clear(),t.$store.commit("changeWallet",t.wallet),t.$toast("支付成功")}))["catch"]((function(){})):this.$toast("未选择代金券")}},computed:{getTotalPrice:function(){return 100*this.wallet.filter((function(t){return t.checked})).reduce((function(t,e){return t+e.price*e.count}),0)}}}),a=l,r=i("2877"),o=Object(r["a"])(a,n,c,!1,null,null,null);e["default"]=o.exports},ab5c:function(t,e,i){},d58f:function(t,e,i){var n=i("1c0b"),c=i("7b0b"),l=i("44ad"),a=i("50c4"),r=function(t){return function(e,i,r,o){n(i);var s=c(e),u=l(s),f=a(s.length),h=t?f-1:0,d=t?-1:1;if(r<2)while(1){if(h in u){o=u[h],h+=d;break}if(h+=d,t?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:f>h;h+=d)h in u&&(o=i(o,u[h],h,s));return o}};t.exports={left:r(!1),right:r(!0)}}}]);
//# sourceMappingURL=chunk-95d37a78.252b8c44.js.map