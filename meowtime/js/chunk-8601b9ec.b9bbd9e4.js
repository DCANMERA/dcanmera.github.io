(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8601b9ec"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},3172:function(t,e,a){"use strict";a("f330")},"794b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"M-search",class:{active:0==t.goodsAllData.length}},[a("div",{ref:"header",staticClass:"M-header"},[a("form",{attrs:{action:"/"}},[a("van-search",{ref:"search",attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{focus:function(e){t.isSearchHistory=!0},search:function(e){return t.search(t.searchValue)}},scopedSlots:t._u([{key:"left",fn:function(){return[a("van-icon",{staticClass:"M-searchBack",attrs:{name:"arrow-left"},on:{click:function(e){return t.$goBack()}}})]},proxy:!0},{key:"action",fn:function(){return[a("div",{on:{click:function(e){return t.search(t.searchValue)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isSearchHistory,expression:"isSearchHistory"}],staticClass:"M-history"},[t._l(t.historyData,(function(e,s){return a("span",{key:s,staticClass:"M-hisItem",on:{click:function(a){return a.stopPropagation(),t.selectValue(e.value)}}},[t._v(t._s(e.value))])})),t.historyData.length>0?a("div",{staticClass:"M-his-del",on:{click:function(e){return e.stopPropagation(),t.clearHistory(e)}}},[t._v("清空历史")]):t._e()],2)]),a("div",{staticClass:"M-product"},t._l(t.goodsAllData,(function(e,s){return a("goods-item",{key:s,attrs:{item:e},on:{add:t.openPupop}},[a("van-icon",{attrs:{slot:"hot",name:0==e.isHot?"hot-sale":"new-arrival"},slot:"hot"}),a("van-tag",{attrs:{slot:"discount",type:"danger"},slot:"discount"},[t._v(" "+t._s(0==e.isHot?"满减":"促销")+" ")]),a("div",{attrs:{slot:"sell"},slot:"sell"},[t._v("已售"+t._s(673*(s+1))+"+")])],1)})),1),a("van-popup",{attrs:{"get-container":"#app",position:"bottom",closeable:"","close-icon":"close"},model:{value:t.isShowPopup,callback:function(e){t.isShowPopup=e},expression:"isShowPopup"}},[a("select-rule",{attrs:{productItemData:t.goodsItem},on:{closePupop:t.closePupop}})],1)],1)},o=[],n=(a("4de4"),a("d81d"),a("d3b7"),a("ac1f"),a("841c"),{name:"Search",components:{GoodsItem:function(){return a.e("chunk-014eb08a").then(a.bind(null,"d248"))},SelectRule:function(){return a.e("chunk-2993c27a").then(a.bind(null,"49c2"))}},data:function(){return{searchValue:"",isSearchHistory:!0,historyData:[],goodsAllData:[],goodsData:[],isShowPopup:!1,goodsItem:{}}},created:function(){var t=this;this.$nextTick((function(){var e=t.$refs.search.querySelector('[type="search"]');e.focus(),JSON.parse(localStorage.getItem("_sh"))&&(t.historyData=JSON.parse(localStorage.getItem("_sh")))}))},methods:{search:function(t){var e=this;this.isSearchHistory=!1,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),""!=t?this.axios({method:"GET",url:"/search",params:{appkey:this.appkey,name:t}}).then((function(a){e.$toast.clear(),"Q001"==a.data.code&&a.data.result.length>0?(e.goodsAllData=[],a.data.result.map((function(t){return e.$getDetail(t.pid)})),0==e.historyData.filter((function(e){return e.value==t})).length&&(e.historyData.unshift({value:t}),localStorage.removeItem("_sh"),localStorage.setItem("_sh",JSON.stringify(e.historyData)))):e.$toast("未找到相关商品")})):this.$toast("输入不能为空")},selectValue:function(t){this.searchValue!=t&&(this.searchValue=t,this.search(t))},clearHistory:function(){localStorage.getItem("_sh")&&(localStorage.removeItem("_sh"),this.historyData=[])},openPupop:function(t){this.pid=t.item.pid,this.goodsItem=t.item,this.isShowPopup=t.show},closePupop:function(t){this.$addPurchase(this.goodsItem),this.isShowPopup=t}}}),r=n,i=(a("3172"),a("2877")),c=Object(i["a"])(r,s,o,!1,null,null,null);e["default"]=c.exports},"841c":function(t,e,a){"use strict";var s=a("d784"),o=a("825a"),n=a("1d80"),r=a("129f"),i=a("14c3");s("search",1,(function(t,e,a){return[function(e){var a=n(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a):new RegExp(e)[t](String(a))},function(t){var s=a(e,t,this);if(s.done)return s.value;var n=o(t),c=String(this),l=n.lastIndex;r(l,0)||(n.lastIndex=0);var u=i(n,c);return r(n.lastIndex,l)||(n.lastIndex=l),null===u?-1:u.index}]}))},f330:function(t,e,a){}}]);
//# sourceMappingURL=chunk-8601b9ec.b9bbd9e4.js.map