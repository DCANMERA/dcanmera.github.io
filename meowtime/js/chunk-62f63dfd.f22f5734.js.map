{"version":3,"sources":["webpack:///./src/views/main/Profile.vue?8d6d","webpack:///src/views/main/Profile.vue","webpack:///./src/views/main/Profile.vue?c220","webpack:///./src/views/main/Profile.vue","webpack:///./node_modules/core-js/modules/es.array.index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","style","backgroundImage","userInfo","userBg","uploadBg","userImg","_v","_s","nickName","desc","_l","item","index","key","title","icon","on","$event","stopPropagation","$goPage","name","staticRenderFns","component","$","$indexOf","indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","target","proto","forced","searchElement","apply","arguments","length","undefined"],"mappings":"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","file":"js/chunk-62f63dfd.f22f5734.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"M-profile\"},[_c('van-notice-bar',{staticClass:\"M-notive\",attrs:{\"left-icon\":\"volume-o\",\"mode\":\"closeable\",\"text\":\"客服在线时间 9:00 - 17:30  客服联系方式 400-600-243\"}}),_c('div',{staticClass:\"M-profileBg\",style:({backgroundImage: 'url('+_vm.userInfo.userBg+')'})},[_c('van-uploader',{staticClass:\"M-upload\",attrs:{\"after-read\":_vm.uploadBg}})],1),_c('div',{staticClass:\"M-profile_info\"},[_c('div',{staticClass:\"M-infoMain\"},[_c('div',{staticClass:\"M-userImg\",style:({backgroundImage: 'url('+_vm.userInfo.userImg+')'})}),_c('div',{staticClass:\"M-profileUserInfo\"},[_c('div',{staticClass:\"M-userName\"},[_vm._v(_vm._s(_vm.userInfo.nickName))]),_c('div',{staticClass:\"M-userDesc\"},[_vm._v(\" \"+_vm._s(_vm.userInfo.desc == '' ? '简介：暂无介绍' : _vm.userInfo.desc)+\" \")])])]),_c('div',{staticClass:\"M-profile_list\"},_vm._l((_vm.listData),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item.title,\"icon\":item.icon,\"is-link\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$goPage(item.name)}}})}),1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"M-profile\">\r\n\r\n    <van-notice-bar class=\"M-notive\"\r\n                    left-icon=\"volume-o\"\r\n                    mode=\"closeable\"\r\n                    text=\"客服在线时间 9:00 - 17:30  客服联系方式 400-600-243\" />\r\n\r\n    <div class=\"M-profileBg\"\r\n         :style=\"{backgroundImage: 'url('+userInfo.userBg+')'}\">\r\n      <van-uploader class=\"M-upload\"\r\n                    :after-read=\"uploadBg\" />\r\n    </div>\r\n\r\n    <div class=\"M-profile_info\">\r\n      <div class=\"M-infoMain\">\r\n        <div class=\"M-userImg\"\r\n             :style=\"{backgroundImage: 'url('+userInfo.userImg+')'}\">\r\n        </div>\r\n        <div class=\"M-profileUserInfo\">\r\n          <div class=\"M-userName\">{{userInfo.nickName}}</div>\r\n          <div class=\"M-userDesc\">\r\n            {{userInfo.desc == '' ? '简介：暂无介绍' : userInfo.desc}}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"M-profile_list\">\r\n        <van-cell v-for=\"(item, index) in listData\"\r\n                  :key=\"index\"\r\n                  :title=\"item.title\"\r\n                  :icon=\"item.icon\"\r\n                  is-link\r\n                  @click.stop=\"$goPage(item.name)\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import '@/assets/scss/profile.scss';\r\n\r\n  export default {\r\n    name: 'Profile',\r\n\r\n    data() {\r\n      return {\r\n\r\n        listData: [{\r\n            title: '个人资料',\r\n            name: 'Person',\r\n            icon: 'manager'\r\n          }, {\r\n            title: '咖啡钱包',\r\n            name: 'Coffeewallet',\r\n            icon: 'gold-coin'\r\n          },\r\n          {\r\n            title: '我的订单',\r\n            name: 'Order',\r\n            icon: 'column'\r\n          },\r\n          {\r\n            title: '收藏夹',\r\n            name: 'Like',\r\n            icon: 'like'\r\n          },\r\n          {\r\n            title: '地址栏',\r\n            name: 'Address',\r\n            icon: 'location'\r\n          },\r\n          {\r\n            title: '安全中心',\r\n            name: 'Secure',\r\n            icon: 'umbrella-circle'\r\n          }\r\n        ],\r\n\r\n        // 用户信息\r\n        userInfo: {}\r\n      };\r\n    },\r\n\r\n    created() {\r\n\r\n      // 获取用户信息\r\n      this.getUserInfo();\r\n    },\r\n\r\n    methods: {\r\n\r\n      // 获取用户信息\r\n      getUserInfo() {\r\n\r\n        // 获取token\r\n        let tokenString = localStorage.getItem('__tk');\r\n\r\n        // 调用判断用户的token\r\n        if (this.$judgeToken(tokenString)) return;\r\n\r\n        this.axios({\r\n            method: \"GET\",\r\n            url: \"/findMy\",\r\n            params: {\r\n              appkey: this.appkey,\r\n              tokenString\r\n            },\r\n          })\r\n          .then(res => {\r\n            this.$toast.clear();\r\n            if (res.data.code == 700) {\r\n              this.$goPage('Login'); // token检验无效,则跳到登录页面\r\n            }\r\n\r\n            if (res.data.code == 'A001') {\r\n              this.userInfo = res.data.result[0];\r\n            }\r\n          });\r\n      },\r\n\r\n      // 上传背景\r\n      uploadBg(file) {\r\n\r\n        // 允许文件类型\r\n        let type = ['gif', 'png', 'jpg', 'jpeg'];\r\n\r\n        // 允许最大文件大小 1MB\r\n        let size = 1;\r\n\r\n        // 判断文件类型\r\n        let fileType = file.file.type.split('/')[1];\r\n        if (type.indexOf(fileType) === -1) {\r\n          this.$toast('文件类型只支持' + (type.join(',')));\r\n          return;\r\n        }\r\n\r\n        // 判断文件大小 B, 1024B = 1KB, 1024KB = 1MB\r\n        let fileSize = file.file.size / 1024 / 1024;\r\n        if (fileSize > size) {\r\n          this.$toast('文件允许最大不能超过' + size + 'MB');\r\n          return;\r\n        }\r\n\r\n        // 处理base64的标记data:image/jpeg;base64,\r\n        let base64 = file.content.replace(/^data:image\\/[A-Za-z]+;base64,/, '');\r\n\r\n        // 获取token\r\n        let tokenString = localStorage.getItem('__tk');\r\n\r\n        // 调用判断用户的token\r\n        if (this.$judgeToken(tokenString)) return;\r\n\r\n        this.axios({\r\n            method: \"POST\",\r\n            url: \"/updateUserBg\",\r\n            data: {\r\n              appkey: this.appkey,\r\n              tokenString,\r\n              imgType: fileType,\r\n              serverBase64Img: base64\r\n            },\r\n          })\r\n          .then(res => {\r\n            this.$toast.clear();\r\n            if (res.data.code == 700) {\r\n              this.$goPage('Login'); // token检验无效,则跳到登录页面\r\n            }\r\n\r\n            if (res.data.code == 'I001') {\r\n              this.userInfo.userBg = res.data.userBg;\r\n            }\r\n\r\n            this.$toast(res.data.msg);\r\n          });\r\n\r\n      },\r\n\r\n    },\r\n\r\n  }\r\n\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=0b5175ed&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}