{"version":3,"sources":["webpack:///./src/assets/img/logo.png","webpack:///./src/views/detail/MovieInfo.vue?8cf9","webpack:///src/views/detail/MovieInfo.vue","webpack:///./src/views/detail/MovieInfo.vue?9503","webpack:///./src/views/detail/MovieInfo.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","style","isShow","movieData","attrs","on","$event","$goBack","stopPropagation","isShowVideo","img","_v","_s","nm","enm","cat","star","pubDesc","dur","_e","class","watched","watchData","wantToWatch","_m","_f","wish","isOpen","dra","photos","showPhoto","buyTickets","directives","name","rawName","value","expression","closePupop","imgUrl","vd","staticRenderFns","component"],"mappings":"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","file":"js/chunk-9e877fd4.f6731774.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/logo.4b1f2144.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"movie-detail\",style:(_vm.isShow ? (\"backgroundColor: \" + (_vm.movieData.backgroundColor)) : '')},[_c('NavBar',{staticClass:\"toFixed\",attrs:{\"text-center\":\"详情\"},on:{\"left-click\":function($event){return _vm.$goBack()}}}),(_vm.isShow)?_c('div',{staticClass:\"movie-info\",style:(_vm.isShow ? (\"backgroundColor: \" + (_vm.movieData.backgroundColor)) : '')},[_c('div',{staticClass:\"movie-info-top\"},[_c('div',{staticClass:\"movie-cover\",on:{\"click\":function($event){$event.stopPropagation();_vm.isShowVideo = true}}},[_c('img',{staticClass:\"img noneBg poster\",attrs:{\"src\":_vm.movieData.img,\"width\":\"100\",\"height\":\"138\",\"e\":\"1\",\"c\":\"1\"}}),_c('img',{staticClass:\"img noneBg poster-play\",attrs:{\"src\":\"//s0.meituan.net/bs/myfe/canary/file/asgard/images/movie/poster-play.png\"}})]),_c('div',{staticClass:\"movie-desc\"},[_c('div',{staticClass:\"movie-desc-top\"},[_c('div',{staticClass:\"movie-cn-name\"},[_c('h1',[_vm._v(_vm._s(_vm.movieData.nm))])]),_c('div',{staticClass:\"movie-en-name\"},[_vm._v(_vm._s(_vm.movieData.enm))]),_c('div',{staticClass:\"movie-other-info\"},[_c('div',{staticClass:\"movie-type\"},[_c('span',{staticClass:\"movie-cat\"},[_vm._v(_vm._s(_vm.movieData.cat))])]),_c('div',{staticClass:\"actors\"},[_c('span',[_vm._v(_vm._s(_vm.movieData.star))])]),_c('div',{staticClass:\"movie-show-time\"},[_c('span',[_vm._v(\" \"+_vm._s(_vm.movieData.pubDesc)+\" \"),(_vm.movieData.dur)?_c('i',[_vm._v(\"/ \"+_vm._s(_vm.movieData.dur)+\"分钟\")]):_vm._e()]),_c('i',{staticClass:\"iconfont icon-right img noneBg \"})])])]),_c('div',{staticClass:\"btns\"},[_c('button',{staticClass:\"button\",class:{watched: _vm.watchData.wantToWatch},attrs:{\"data-bid\":\"b_rjonirtp\",\"type\":\"button\"},on:{\"click\":_vm.wantToWatch}},[_c('i',{staticClass:\"iconfont icon-heart img noneBg\"}),_c('span',[_vm._v(\"想看\")])]),_c('button',{staticClass:\"link button btn-right\",class:{watched: _vm.watchData.watched},on:{\"click\":_vm.watched}},[_c('i',{staticClass:\"iconfont icon-star img noneBg\"}),_c('span',[_vm._v(\"看过\")])])])])]),_c('div',{staticClass:\"real-time-word-of-mouth theater-chain-not-graded\"},[_vm._m(0),_c('div',{staticClass:\"middle\"},[_c('span',{staticClass:\"people-want-to-watch\"},[_vm._v(\" \"+_vm._s(_vm._f(\"getThousands\")(_vm.movieData.wish))+\" \")]),_c('span',[_vm._v(\"人想看\")])])]),_c('div',{staticClass:\"brief-introduction\"},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"简介\")]),_c('div',{staticClass:\"open\",on:{\"click\":function($event){_vm.isOpen = !_vm.isOpen}}},[_c('span',[_vm._v(_vm._s(_vm.isOpen?'收起':'展开'))]),_c('i',{staticClass:\"iconfont\",class:_vm.isOpen ? 'icon-up' : 'icon-down'})])]),_c('div',{staticClass:\"content \",attrs:{\"data-bid\":\"b_y93QJ\"}},[_c('p',{class:_vm.isOpen ? '' : 'line-clamp',attrs:{\"id\":\"brief-introduction-content\"}},[_vm._v(\" \"+_vm._s(_vm.movieData.dra)+\" \")])])]),_c('MovieList',{attrs:{\"movieList\":_vm.photos},on:{\"click-photo\":_vm.showPhoto}},[_c('div',{staticClass:\"stage-photo\"},[_vm._v(\"剧照\")])]),_c('div',{staticClass:\"buyMovie\"},[_c('div',{staticClass:\"buyMovie-btn\",on:{\"click\":_vm.buyTickets}},[_vm._v(\" 特约购票 \")])])],1):_c('div',{staticClass:\"loading-mask\"},[_c('img',{attrs:{\"src\":require('@/assets/img/logo.png')}}),_c('span',[_vm._v(\"加载中...\")])]),_c('Popup',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowPhoto),expression:\"isShowPhoto\"}],on:{\"close\":_vm.closePupop}},[_c('img',{staticClass:\"img\",attrs:{\"src\":_vm.imgUrl}})]),(_vm.isShowVideo)?_c('Popup',{on:{\"close\":_vm.closePupop}},[_c('video',{attrs:{\"src\":_vm.movieData.vd,\"controls\":\"\",\"autoplay\":\"\"}})]):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"left\"},[_c('img',{staticClass:\"img noneBg\",attrs:{\"alt\":\"logo\",\"src\":require(\"../../assets/img/logo.png\")}}),_c('span',[_vm._v(\"实时口碑\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"movie-detail\"\r\n       :style=\"isShow ? `backgroundColor: ${movieData.backgroundColor}` : ''\">\r\n\r\n    <!-- 顶部导航栏 -->\r\n    <NavBar @left-click=\"$goBack()\"\r\n            text-center=\"详情\"\r\n            class=\"toFixed\"></NavBar>\r\n\r\n    <!-- 电影详情信息 -->\r\n    <div class=\"movie-info\"\r\n         :style=\"isShow ? `backgroundColor: ${movieData.backgroundColor}` : ''\"\r\n         v-if=\"isShow\">\r\n\r\n      <!-- 电影头部详情介绍 -->\r\n      <div class=\"movie-info-top\">\r\n        <div class=\"movie-cover\"\r\n             @click.stop=\"isShowVideo = true\">\r\n          <img class=\"img noneBg poster\"\r\n               :src=\"movieData.img\"\r\n               width=\"100\"\r\n               height=\"138\"\r\n               e=\"1\"\r\n               c=\"1\">\r\n          <img class=\"img noneBg poster-play\"\r\n               src=\"//s0.meituan.net/bs/myfe/canary/file/asgard/images/movie/poster-play.png\">\r\n        </div>\r\n        <div class=\"movie-desc\">\r\n          <div class=\"movie-desc-top\">\r\n            <div class=\"movie-cn-name\">\r\n              <h1>{{movieData.nm}}</h1>\r\n            </div>\r\n            <div class=\"movie-en-name\">{{movieData.enm}}</div>\r\n            <div class=\"movie-other-info\">\r\n              <div class=\"movie-type\">\r\n                <span class=\"movie-cat\">{{movieData.cat}}</span>\r\n              </div>\r\n              <div class=\"actors\">\r\n                <span>{{movieData.star}}</span>\r\n              </div>\r\n              <div class=\"movie-show-time\">\r\n                <span>\r\n                  {{movieData.pubDesc}}\r\n                  <i v-if=\"movieData.dur\">/ {{movieData.dur}}分钟</i>\r\n                </span>\r\n                <i class=\"iconfont icon-right img noneBg \"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"btns\">\r\n            <button data-bid=\"b_rjonirtp\"\r\n                    type=\"button\"\r\n                    class=\"button\"\r\n                    :class=\"{watched: watchData.wantToWatch}\"\r\n                    @click=\"wantToWatch\">\r\n              <i class=\"iconfont icon-heart img noneBg\"></i>\r\n              <span>想看</span>\r\n            </button>\r\n            <button class=\"link button btn-right\"\r\n                    :class=\"{watched: watchData.watched}\"\r\n                    @click=\"watched\">\r\n              <i class=\"iconfont icon-star img noneBg\"></i>\r\n              <span>看过</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 电影想看区 -->\r\n      <div class=\"real-time-word-of-mouth theater-chain-not-graded\">\r\n        <div class=\"top\">\r\n          <div class=\"left\">\r\n            <img class=\"img noneBg\"\r\n                 alt=\"logo\"\r\n                 src=\"../../assets/img/logo.png\">\r\n            <span>实时口碑</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"middle\">\r\n          <span class=\"people-want-to-watch\">\r\n            {{movieData.wish | getThousands}}\r\n          </span>\r\n          <span>人想看</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 电影介绍 -->\r\n      <div class=\"brief-introduction\">\r\n        <div class=\"title\">\r\n          <span>简介</span>\r\n          <div class=\"open\"\r\n               @click=\"isOpen = !isOpen\">\r\n            <span>{{isOpen?'收起':'展开'}}</span>\r\n            <i class=\"iconfont\"\r\n               :class=\"isOpen ? 'icon-up' : 'icon-down'\"></i>\r\n          </div>\r\n        </div>\r\n        <div data-bid=\"b_y93QJ\"\r\n             class=\"content \">\r\n          <p id=\"brief-introduction-content\"\r\n             :class=\"isOpen ? '' : 'line-clamp'\">\r\n            {{movieData.dra}}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 剧照区域 -->\r\n      <MovieList :movieList=\"photos\"\r\n                 @click-photo=\"showPhoto\">\r\n        <div class=\"stage-photo\">剧照</div>\r\n      </MovieList>\r\n\r\n      <!-- 电影票购买区域 -->\r\n      <div class=\"buyMovie\">\r\n        <div class=\"buyMovie-btn\"\r\n             @click=\"buyTickets\">\r\n          特约购票\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else\r\n         class=\"loading-mask\">\r\n      <img :src=\"require('@/assets/img/logo.png')\">\r\n      <span>加载中...</span>\r\n    </div>\r\n\r\n    <!-- 图片与视频弹出 -->\r\n    <Popup v-show=\"isShowPhoto\"\r\n           @close=\"closePupop\">\r\n      <img class=\"img\"\r\n           :src=\"imgUrl\">\r\n    </Popup>\r\n    <Popup v-if=\"isShowVideo\"\r\n           @close=\"closePupop\">\r\n      <video :src=\"movieData.vd\"\r\n             controls\r\n             autoplay>\r\n      </video>\r\n    </Popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import '@/assets/scss/movieInfo.scss'\r\n  import {\r\n    mapState,\r\n    mapMutations\r\n  } from 'vuex'\r\n\r\n  export default {\r\n    name: 'movieInfo',\r\n\r\n    data() {\r\n      return {\r\n\r\n        // 加载完成\r\n        isShow: false,\r\n\r\n        // 电影ID\r\n        movieId: '',\r\n\r\n        // 判断电影类型\r\n        showst: '',\r\n\r\n        // 电影数据\r\n        movieData: {},\r\n\r\n        // 保存想看与看过bool\r\n        watchData: {\r\n\r\n          // 是否想看\r\n          \"wantToWatch\": false,\r\n\r\n          // 是否看过\r\n          \"watched\": false\r\n\r\n        },\r\n\r\n\r\n        // 是否展开内容区\r\n        isOpen: false,\r\n\r\n        // 电影剧照数据\r\n        photos: [],\r\n\r\n        // 弹窗bool\r\n        isShowVideo: false,\r\n\r\n        // 弹窗bool\r\n        isShowPhoto: false,\r\n\r\n        // 判断是视频还是图\r\n        judge: true,\r\n\r\n        // 剧照url\r\n        imgUrl: ''\r\n      }\r\n    },\r\n\r\n    created() {\r\n\r\n      // 截取电影params\r\n      this.movieId = this.$route.params.movieId\r\n      this.showst = this.$route.params.showst\r\n      this.setMovieId(this.movieId)\r\n\r\n\r\n      // 获取电影数据\r\n      this.getMovieDetail(this.movieId)\r\n\r\n      // 获取看过的bool、想看的bool\r\n      if (JSON.parse(localStorage.getItem('watch' + this.movieId))) {\r\n        this.watchData = JSON.parse(localStorage.getItem('watch' + this.movieId))\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      '$route.params.movieId'(movieId) {\r\n        this.getMovieDetail(movieId)\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      ...mapState('api', {\r\n        api: state => state.api,\r\n      }),\r\n      ...mapState('cinemaModule', {\r\n        cinema: state => state.cinema\r\n      }),\r\n      ...mapState({\r\n        appkey: state => state.appkey\r\n      })\r\n    },\r\n\r\n    methods: {\r\n      ...mapMutations('userModule', {\r\n        setUser: 'setUser'\r\n      }),\r\n      ...mapMutations('cinemaModule', {\r\n        setMovieImg: 'setMovieImg',\r\n        setMovieId: 'setMovieId',\r\n        setCinema: 'setCinema',\r\n      }),\r\n\r\n      // 获取电影详情\r\n      getMovieDetail(movieId) {\r\n\r\n        // 加载中...\r\n        this.isShow = false\r\n        // this.$toast('loading', 0)\r\n        this.axios({\r\n            url: this.api.detailmovie,\r\n            params: {\r\n              movieId: movieId\r\n            }\r\n          })\r\n          .then(res => {\r\n            if (res.data.detailMovie) {\r\n              this.$toast.clear()\r\n              this.isShow = true\r\n              this.movieData = res.data.detailMovie\r\n              this.movieData.cat = this.movieData.cat.replace(/\\,/g, ' / ')\r\n              this.movieData.star = this.movieData.star.replace(/\\,/g, ' / ')\r\n              this.movieData.img = this.$imgUrl(this.movieData.img)\r\n              this.movieData.photos.map(item => {\r\n                let obj = {}\r\n                obj.img = this.$imgUrl(item)\r\n                obj.nm = ''\r\n                obj.comingTitle = ''\r\n                this.photos.push(obj)\r\n              })\r\n            }\r\n          })\r\n      },\r\n\r\n      // 关闭弹窗\r\n      closePupop(bool) {\r\n        this.isShowVideo = bool\r\n        this.isShowPhoto = bool\r\n      },\r\n\r\n      // 显示大图\r\n      showPhoto(index) {\r\n        this.isShowPhoto = true\r\n        this.imgUrl = this.photos[index].img\r\n      },\r\n\r\n      // 想看\r\n      wantToWatch() {\r\n        let watch = 'watch' + this.movieId\r\n        this.watchData.wantToWatch = !this.watchData.wantToWatch\r\n        localStorage.removeItem(watch)\r\n        localStorage.setItem(watch, JSON.stringify(this.watchData))\r\n      },\r\n\r\n      // 看过\r\n      watched() {\r\n        let watch = 'watch' + this.movieId\r\n        this.watchData.watched = !this.watchData.watched\r\n        localStorage.removeItem(watch)\r\n        localStorage.setItem(watch, JSON.stringify(this.watchData))\r\n      },\r\n\r\n      // 买票\r\n      buyTickets() {\r\n\r\n        // 先判断用户token的存在\r\n        let tokenString = localStorage.getItem('__tk')\r\n        if (!tokenString) {\r\n          this.$toast('请先登录')\r\n          setTimeout(() => {\r\n            this.$goPage({\r\n              name: 'Login'\r\n            })\r\n          }, 1000)\r\n          return\r\n        }\r\n\r\n        this.axios({\r\n            method: \"GET\",\r\n            url: this.api.findAccountInfo,\r\n            params: {\r\n              appkey: this.appkey,\r\n              tokenString,\r\n            },\r\n          })\r\n          .then(res => {\r\n            this.$toast.clear()\r\n            if (res.data.code == 700) {\r\n              this.$toast('请先登录')\r\n              setTimeout(() => {\r\n                this.$goPage({\r\n                  name: 'Login'\r\n                })\r\n              }, 1500)\r\n            }\r\n            if (res.data.code == \"B001\") {\r\n              this.setUser(res.data)\r\n              if (!this.cinema.nm) {\r\n                this.$toast('请先选择影院')\r\n                setTimeout(() => {\r\n                  this.$goPage({\r\n                    name: 'Cinema'\r\n                  })\r\n                }, 1500)\r\n                return\r\n              }\r\n              if (this.showst == 4) {\r\n                this.$toast('该电影处于预售状态，现不可购票')\r\n                return\r\n              }\r\n              this.setMovieImg(this.movieData.img)\r\n              this.$goPage({\r\n                name: 'Pay',\r\n                query: {\r\n                  id: this.movieData.id,\r\n                  nm: this.movieData.nm,\r\n                  oriLang: this.movieData.oriLang,\r\n                  ver: this.movieData.ver,\r\n                  dur: this.movieData.dur\r\n                }\r\n              })\r\n            }\r\n          })\r\n      }\r\n    },\r\n\r\n    beforeRouteEnter(to, from, next) {\r\n      document.querySelectorAll('.mask').forEach((item, index) => item.remove())\r\n      next()\r\n    },\r\n\r\n    beforeRouteLeave(to, from, next) {\r\n      document.querySelectorAll('.mask').forEach((item, index) => item.remove())\r\n      next()\r\n    }\r\n  }\r\n\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MovieInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MovieInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MovieInfo.vue?vue&type=template&id=1fd33289&\"\nimport script from \"./MovieInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./MovieInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}